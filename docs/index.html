<!DOCTYPE html>

<html lang="zh">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="referrer" content="never">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0">
  <meta name="format-detection" content="telephone=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="description" content="万明磊的个人主页,万明磊的个人学习分享,万明磊的博客杂谈,万明磊的友情链接">
  <meta name="keywords" content="万明磊,个人主页,文章,生活,pekst.com">
  <link rel="icon" href="img/favicon.ico">
  <link rel="apple-touch-icon" href="img/favicon.ico"/>
  <title>万明磊的个人主页</title>
  <style>
    * { margin: 0; padding: 0; font-family: Arial, sans-serif; }
    html { height: 100vh; }
    body { font-size: 1em; }
    .main { margin-top: 35vh; margin-left: 300px; transition: margin .5s; }
    .logo { width: 150px; height: 50px; background-color: black; border-radius: 3px; }
    .logo::before {
		content: "PUZZLE";
		position: relative;
		font-size: 25px;
		line-height: 50px;
		top: 0;
		left: 3px;
		color: white;
	}
    .logo::after { content: ""; display: block; opacity: 0; transition: opacity .5s; position: relative; width: calc(61px * 1.5); height: calc(49px * 1.5); top: -115px; left: -4px; background-image: url('img/22.png'); background-size: cover; }
    .logo:hover::after { opacity: 1; }
    .desc { margin: 15px 0; color: black; font-size: 16px; line-height:20px; }
    .nav { text-align: center; font-size: 14px; text-align: left; }
    .nav ul { list-style: none; }
    .nav li { display: inline-block; margin-right: 5px; }
    .nav a { color: black; transition: color .5s; }
    .nav a:hover { color: gray; }
    .footer{ width: 100vw; height: 100px; position: fixed; bottom: 0; text-align: center; color: whitesmoke; transition: color .5s; }
    .footer:hover { color: gray; }
    .icp { font-size: 10px; line-height: 100px; }
    .antiselect { user-select: none; -ms-user-select: none; -moz-user-select: none; -webkit-user-select: none; }

    .link { position: fixed; top: 0; left: 0; width: calc(100vw - 40px); height: calc(100vh - 40px); background-color: whitesmoke; padding: 20px; overflow-y: scroll; transition: opacity .5s, top .5s; -webkit-overflow-scrolling: touch; }
    .l-back { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-size: cover; background-position: center; -webkit-filter: blur(100px); -moz-filter: blur(100px); -o-filter: blur(100px); -ms-filter: blur(100px); filter: blur(100px); opacity: .5; transition: background .25s; }
    .l-hidden { top: 100vh; opacity: 0; }
    .l-close { position: fixed; top: 20px; right: 20px; width: 40px; height: 40px; z-index: 9999; filter: grayscale(100%); transition: filter .3s; }
    .l-close:hover { filter: grayscale(0%); }
    .lc-1, .lc-2 { display: block; position: absolute; top: 15px; left: 0px;  width: 40px; height: 10px; background-color: skyblue; border-radius: 3px; transition: background .5s; }
    .lc-1 { transform: rotate(45deg); }
    .lc-2 { transform: rotate(-45deg); }
    .l-group { width: 100%; }
    .l-title { margin: 20px; }
    .l-box { width: 100%; }
    .l-box:before, .l-box:after { content: ''; display: table; }
    .l-box:after { clear: both; }
    .l-item { position: relative; float: left; width: calc(20% - 40px); height: 64px; padding: 10px; margin: 10px; border-radius: 15px; transition: background .5s; }
    .l-item:hover { background-color: skyblue; }
    .li-logo { display: inline-block; float: left; width: 64px; height: 64px; background-color: white; background-size: cover; background-position: center; border-radius: 32px; transition: transform .5s, border-radius .5s; }
    .l-item:hover .li-logo { transform: rotate(0deg); border-radius: 12px; }
    .l-item h2, .l-item span { margin-left: 5px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
    .l-item h2 { display: inline-block; float: left; width: calc(100% - 70px); height: 38px; line-height: 38px; font-size: 22px; font-weight: normal; }
    .l-item span { display: inline-block; float: left; max-width: calc(100% - 70px); }
    .l-icon { padding-left: 20px; background-size: auto 90%; background-repeat: no-repeat; background-position:left; }

    .qrCode { display: none; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background-color: rgba(0, 0, 0, .9); }
    .qrCode #qrImg { display: block; width: 260px; height: 260px; background-color: white; border: 15px solid white; border-radius: 10px; margin-top: calc(40vh - 130px); margin-left: auto; margin-right: auto; }
    .qrCode p { display: block; width: 360px; margin: 20px auto; font-size: 20px; color: white; text-align: center; }
    .qrCode span { font-size: 12px; line-height: 20px; color: whitesmoke; text-align: center; }

    #maomao {position: fixed; bottom: 40px; right: -5px; width: 57px; height: 70px; background-image: url(img/mao.svg); background-position: center; background-size: cover; background-repeat: no-repeat; transition: background .3s;}
    #maomao:hover {background-position: 60px 50%;}

    @media screen and (max-width: 1199px) {
      .main { margin-left: 200px; }
      .l-item { width: calc(25% - 40px); }
	}

    @media screen and (max-width: 991px) {
      .main { margin-left: 150px; }
      .l-item { width: calc(33.33% - 40px); }
    }

    @media screen and (max-width: 767px) {
      .main { margin-left: 100px; }
      .l-item { width: calc(50% - 40px); }
    }

    @media screen and (max-width: 512px) {
      .main { margin-left: 50px; }
      .l-item { width: calc(100% - 40px); }
    }
  </style>
</head>
<body class="antiselect">
  <div class="main">
    <div class="logo" onmouseover="plaaaay('miao')"></div>
    <div class="desc">
      <p>As the tree, so the fruit.</p>
    </div>
    <ul class="nav">
      <li><a href="javascript:swLinks(1);">LET'S GO!</a></li>
      <section style="margin: 10px 0;">
      	<li><a style="text-decoration: none;" target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=42062602000052">鄂ICP备20009958号-1</a></li>
      </section>
    </ul>
  </div>
  <div class="link l-hidden" id="link">
    <div class="l-back l-hidden" id="l-back"></div>
    <div class="l-close" onclick="swLinks(0);">
      <span class="lc-1"></span>
      <span class="lc-2"></span>
    </div>
  </div>
  <div id="qrCode" class="qrCode" onclick="hideQr()">
    <section id="qrImg">
      <img src="img/qrcode.png"/>
    </section>
    <p id="qrDesc">请扫码</p>
  </div>
  <div style="display: none;">
    <audio id="miao" src="ogg/miao_cocoa.ogg" preload="auto">Your browser does not support the audio element.</audio>
  </div>
  <div id="maomao" onMouseOut="duoMaomao()"></div>
  <script crossorigin="anonymous" integrity="sha384-THPy051/pYDQGanwU6poAc/hOdQxjnOEXzbT+OuUAFqNqFjL+4IGLBgCJC3ZOShY" src="https://lib.baomitu.com/jquery/3.0.0/jquery.min.js"></script>
<script src="js/qrcode.js"></script>
<script>
  var plaaaay = function(id) {
    $('#' + id)[0].play();
  }
  var exWords = function(id, str) {
    $(id).html(str);
  }
  var swLinks = function(st) {
    if(st == 1) {
      $('#link').removeClass('l-hidden');
      $('#l-back').removeClass('l-hidden');
      plaaaay('ruready');
    } else if(st == 0) {
      $('#link').addClass('l-hidden');
      $('#l-back').addClass('l-hidden');
    }
  }
  var getLinks = function(url) {
    $.getJSON(url, {t: Date.parse(new Date())}, function(result) {
      $.each(result, function(i, obj) {
        $.each(obj, function(n, links) {
          var l_group = $('<div class="l-group"></div>');
          var l_title = $('<div class="l-title"><h1>' + n + '</h1></div>');
          l_group.append(l_title);
          var l_box = $('<div class="l-box"></div>');
          //links.sort(function(){ return 0.5 - Math.random() }); // random
          $.each(links, function(j, link) {
            var lil_url = link.logo != null ? link.logo : './src/loading.svg';
            var lid_text = link.desc != null ? link.desc : '暂无描述 ┑(￣Д ￣)┍';
            var l_item = $('<div class="l-item"></div>');
            l_item.attr("title", '✦ ' + link.name + '\n✧ ' + lid_text + '\n✧ ' + link.href);
            l_item.bind('click', function(){
              window.open(link.href + (link.noUtm === undefined ? '' : ''));
            }).bind("contextmenu", function () {
              showQr(link.href + (link.noUtm === undefined ? '' : ''), link.name + '<br><span>' + lid_text + '</span>', lil_url);
              return false;
            });
            var li_logo = $('<div class="li-logo"></div>');
            li_logo.css('background-image', 'url(' + lil_url + ')');
            l_item.append(li_logo);
            var li_name = $('<h2>' + link.name + '</h2>');
            l_item.append(li_name);
            var li_desc = $('<span>' + lid_text + '</span>');
            l_item.append(li_desc);
            l_item.bind('mouseover', function(){
              $('.l-back').css('background-image', 'url(' + lil_url + ')');
            });
            l_box.append(l_item);
          });
          l_group.append(l_box);
          $('#link').append(l_group);
        });
      });
    });
  }
  var randomNum = function(minNum, maxNum) {
    switch(arguments.length){
      case 1:
        return parseInt(Math.random() * minNum + 1, 10);
        break;
      case 2:
        return parseInt(Math.random() * (maxNum - minNum + 1) + minNum, 10);
        break;
      default:
        return 0;
        break;
    }
  }
  var showQr = function(url, txt, logo) {
      var qrnode = new AraleQRCode({
        render: 'canvas',
        correctLevel: 2,
        text: url,
        size: 260,
        background: '#fff',
        foreground: '#000',
        pdground: '#f33',
        image : logo,
        imageSize : 32
      });
      $('#qrImg').html(qrnode);
      $('#qrCode').css('display', 'block');
      $('#qrDesc').html(txt);
  }
  var hideQr = function(url) {
      $('#qrCode').css('display', 'none');
  }
  var duoMaomao = function() {
    var maomao = $('#maomao');
    maomao.css('bottom', randomNum(5, 80) + 'vh');
  }
  $(function(){
  	getLinks('js/links.json');
  	//getLinks('./links_demo.json');
    if(location.hash == '#link') {
      $('#link').removeClass('l-hidden');
      $('#l-back').removeClass('l-hidden');
    }
  });
</script>
</body>
</html>